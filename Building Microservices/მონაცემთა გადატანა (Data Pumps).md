ანგარიშგების სისტემამ მონაცემები არ უნდა გამოიწვიოს — ამის ნაცვლად, მონაცემები შეიძლება **დაეწოდოს ანგარიშგების სისტემას**. მონაცემების სტანდარტული HTTP გამოძახებით მიღების ერთ-ერთი ნაკლი არის HTTP-ს დამატებითი დატვირთვა, როცა დიდი რაოდენობის გამოძახებას ვაკეთებთ, ასევე იმ API-ების შექმნის დატვირთვა, რომლებიც შესაძლოა არსებობდნენ მხოლოდ ანგარიშგებისთვის. ალტერნატიული ვარიანტია **სტანდალონ პროგრამის** გამოყენება, რომელიც პირდაპირ იტვირთავს მონაცემებს სერვისის მონაცემთა ბაზიდან და აჭერს მათ ანგარიშგების მონაცემთა ბაზაში, როგორც ნაჩვენებია ფიგურაში 5-13.
![[Pasted image 20250913183157.png]]
##### **ფიგურა 5-13. მონაცემთა პომპის გამოყენება მონაცემების პერიოდულად ცენტრალურ ანგარიშგების ბაზაში გადატანისთვის**

შესაძლოა ახლა თქვათ: „მაგრამ სემ, შენ თქვი, რომ ბევრ პროგრამას ერთ მონაცემთა ბაზაზე ინტეგრირება ცუდი იდეაა!“ — მართალია, ეს ჩემი წინა წერტილი იყო. თუმცა ეს მიდგომა, თუ სწორად განხორციელდება, წარმოადგენს **განსხვავებულ გამონაკლისს**, სადაც კუპლინგის ნაკლოვანებები უფრო მეტწილად ნეიტრალიზებულია ანგარიშგების გამარტივებით.

---

**მიზეზები და საუკეთესო პრაქტიკა:**

1. **მონაცემთა პომპი უნდა მართავდეს იგივე გუნდი, რომელიც მართავს სერვისს.**  
    ეს შეიძლება იყოს ძალიან მარტივი **command-line პროგრამა**, რომელიც გაშვებულია Cron-ით. პროგრამას უნდა ჰქონდეს ღრმა ცოდნა სერვისის შიდა მონაცემთა ბაზის და ასევე ანგარიშგების სქემის შესახებ. პომპის დავალებაა ერთი სქემის მეორე სქემაში რუკირება.
    
2. **კუპლინგის პრობლემების შემცირება**  
    კუპლინგის პრობლემა სერვისის სქემასთან მცირდება იმით, რომ იგივე გუნდი მართავს როგორც სერვისს, ასევე პომპს. რეკომენდებულია, რომ ორივე პროექტი **version control-ში** იყოს, და მონაცემთა პომპის build-იც განისაზღვროს როგორც სერვისის build-ის დამატებითი არტეფაქტი. ასე რომ, როცა ერთს განათავსებთ, მეორე ავტომატურად განთავსდება. ამასთან, სქემაზე წვდომა არ უნდა მიეცეს სერვისის გუნდის გარეთ, რაც ტრადიციული DB ინტეგრაციის პრობლემებს მნიშვნელოვნად ამცირებს.
    
3. **ანგარიშგების სქემის კუპლინგი რჩება**, მაგრამ მას უნდა მოეკიდოთ როგორც **გამოქვეყნებულ API-ს**, რომელსაც რთულად შეუძლია ცვლილება. ზოგიერთ მონაცემთა ბაზას აქვს ტექნიკები, რომლითაც ეს ხარჯი შეიძლება შემცირდეს.
    

![[Pasted image 20250913183211.png]]
##### **ფიგურა 5-14. materialized views-ის გამოყენება მონოლითური ანგარიშგების სქემის შექმნისთვის**  
მაგალითად, თითოეული სერვისისთვის შეგიძლიათ შექმნათ სქემა ანგარიშგების DB-ში, **materialized views-ის** გამოყენებით აგრეგირებული ხედების შესაქმნელად. ასე exposed-only-ია ანგარიშგების სქემა, რომელსაც მონაცემთა პომპი მოიხმარს. მისი ეფექტიანობა დამოკიდებულია იმ DB-ის შესაძლებლობებზე, რომელიც ანგარიშგებისთვის გამოიყენეთ.

---

**მონაცემთა პომპების უპირატესობები და გამოწვევები:**

- ინტეგრაციის სირთულე გადატანილია სქემაში და საჭიროებს DB-ის შესაძლებლობების გამოყენებას, რათა performant-ი იყოს.
    
- ზოგადად, მონაცემთა პომპები ჭკვიანური და განხორციელებადი ვარიანტია, თუმცა სქემის ფრაგმენტაციის სირთულე ხშირად არ ღირს მისი გამოყენების დროს გამოწვეული სირთულეების გამო.
    

**ალტერნატიული დანიშნულებები:**  
ერთ პროექტზე, სადაც ვმუშაობდი, მონაცემთა პომპები გამოიყენებოდა **JSON ფაილების ავსებისთვის AWS S3-ში**, რომელიც პრაქტიკულად იქცა გიგანტურ Data Mart-ს. ეს მიდგომა კარგად მუშაობდა, სანამ საჭირო გახდა მასშტაბირება. მომავალი გეგმები იყო პომპები შეცვლილიყო ისე, რომ **cube-ში მონაცემების შეტანა** შესაძლებელი გახდეს, რომელიც სტანდარტულ ანგარიშგების ინსტრუმენტებთან, როგორიცაა Excel ან Tableau, ინტეგრირდება.