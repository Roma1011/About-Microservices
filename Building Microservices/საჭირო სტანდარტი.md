როდესაც მუშაობთ პრაქტიკებზე და ფიქრობთ კომპრომისებზე, რომელთა მიღებაც სჭირდებათ, ერთ-ერთი მთავარი დაბალანსებაა, რამდენი ცვლილების შესაძლებლობა უნდა დარჩეს სისტემაში.

ერთ-ერთი ძირითადი გზა იმის დასადგენად, რა უნდა იყოს მუდმივი სერვისიდან სერვისამდე, არის განსაზღვრა, როგორ გამოიყურება „კარგი, წესრიგიანი“ სერვისი. რა არის „კარგი მოქალაქე“ თქვენი სისტემის სერვისებს შორის? რა შესაძლებლობები უნდა ჰქონდეს მას, რათა სისტემა მართვადი იყოს და ერთი პრობლემური სერვისი მთელ სისტემას არ ჩახშოს?

როგორც ადამიანებთან, ისე სერვისებთანაც, კარგი მოქალაქე ერთ კონტექსტში შეიძლება იყოს, მაგრამ სხვაგან სხვა მიმოსვლა ან ქცევა ჰქონდეს. მიუხედავად ამისა, არსებობს ზოგადი მახასიათებლები, რომლებიც კარგ სერვისებს ახასიათებს და რომლებიც მნიშვნელოვანია ყურადღების მიღმა არ დარჩეს. ეს მცირე, მაგრამ კრიტიკული სფეროებია, სადაც ძალიან დიდი დივერგენცია სისტემას სერიოზულ პრობლემებში შეიძლება შეიყვანოს.

როგორც Netflix-ის ბენ კრისტენსენი აღნიშნავს, დიდი სურათის ხედვისას: _„ეს უნდა იყოს კოჰერენტული სისტემა, რომელიც შედგება მრავალი პატარა ნაწილისგან, რომლებიც ავტონომიური ციკლებით ფუნქციონირებენ, მაგრამ საბოლოოდ ერთ მთლიანობაში იკვრებიან.“_

ამიტომ აუცილებელია დაბალანსდეს ინდივიდუალური მიკროსერვისების ავტონომიის ოპტიმიზაცია და დიდი სურათის შენარჩუნება. ერთ-ერთი გზა ამ ბალანსის განსაზღვრისა არის განსაზღვრა, რა აშკარა მახასიათებლები უნდა ჰქონდეს თითოეულ სერვისს.


### მონიტორინგი

სისტემის ჯანმრთელობის შესახებ კოორდინირებული, კროს-სერვისული ხედვის მოპოვება აუცილებელია. ეს უნდა იყოს სისტემური ხედვა, არა მხოლოდ კონკრეტული სერვისის.

ცალკეული სერვისის ჯანმრთელობის ცოდნა გამოსადეგია, მაგრამ უმეტესად მხოლოდ მაშინ, როდესაც ფართო პრობლემას ან დიდ ტენდენციას იკვლევთ.

ამ პროცესის გასამარტივებლად უმჯობესია, ყველა სერვისი ერთნაირად გამოაგზავნოს ჯანმრთელობისა და მონიტორინგის მეტრიკები.

- შეიძლება აირჩიოთ push მექანიზმი, სადაც სერვისი მონაცემებს ცენტრალურ ადგილას აგზავნის (მაგალითად, მეტრიკებისთვის — Graphite, ჯანმრთელობისთვის Nagios).
    
- ან გამოიყენოთ polling სისტემა, რომელიც მონაცემებს ნოდებიდან იღებს.
    

რაც არ უნდა აირჩიოთ, შეინარჩუნეთ სტანდარტიზაცია. ბოქსში არსებული ტექნოლოგია შეინახეთ შიგნიდან შეუმჩნევლად და არ მოითხოვოთ მონიტორინგის სისტემების შეცვლა მის გასააქტიურებლად.

ლოგირებაც იგივე კატეგორიას განეკუთვნება: მონაცემები ერთი ადგილზე უნდა იყოს.

---

### ინტერფეისები

მოცულობით მცირე, განსაზღვრული ინტერფეისების ტექნოლოგიების არჩევა ახალ მომხმარებლებთან ინტეგრაციას ამარტივებს.

- ერთი სტანდარტი იდეალურია.
    
- ორი სტანდარტიაც მისაღებია.
    
- 20 განსხვავებული ინტეგრაციის სტილი ცუდია.
    

ეს არ ეხება მხოლოდ ტექნოლოგიას ან პროტოკოლს. მაგალითად, HTTP/REST-ის არჩევისას, უნდა გადაწყვიტოთ:

- სერვისები ვერბებით თუ ნაუნებით ვმართოთ?
    
- რესურსების pagination როგორ მოხდება?
    
- endpoint-ის ვერსიების მართვა როგორ განხორციელდეს?
    

---

### არქიტექტურული უსაფრთხოება

ჩვენ ვერ შევეგუებით, რომ ერთი პრობლემური სერვისი ყველა სხვა სერვისის მუშაობას ჩაშლის. სერვისებმა უნდა იცავდნენ თავს არასაჯარო, ქვედა დონის პრობლემური მოთხოვნებისგან.

რაც მეტი სერვისი არ მართავს სწორად ქვედა დონის შეცდომებს, მით უფრო დაუცველი იქნება სისტემა.

- მინიმუმ, თითოეულ downstream სერვისს უნდა ჰქონდეს საკუთარი connection pool.
    
- შეიძლება მივიღოთ გადაწყვეტილება, რომ თითოეულს ჰქონდეს circuit breaker.
    

ეს დეტალურად განვიხილავთ მიკროსერვისების მასშტაბირებაზე კითხვის 11-ე თავში.

სწორედ HTTP კოდებთან დაკვირვებაც მნიშვნელოვანია. თუ თქვენი circuit breaker-ები HTTP კოდებს იყენებს, და ერთი სერვისი 2XX კოდს აგზავნის შეცდომებისთვის, ან 4XX-ი 5XX-ს ურევს, უსაფრთხოების მექანიზმები შეუძლებელია მუშაობა.

მსგავსი პრინციპი ძალაშია მაშინაც, როდესაც HTTP არ იყენებთ. მნიშვნელოვანია, სწორად განასხვავოთ:

- მოთხოვნა, რომელიც წარმატებით შესრულდა
    
- მოთხოვნა, რომელიც ცუდი იყო და სერვისი ვერანაირად ვერ მოაგვარებს
    
- მოთხოვნა, რომელიც შესაძლოა კარგად შესრულდეს, მაგრამ ვერ გავიგეთ, რადგან სერვერი ჩამორჩა
    

თუ სერვისები წესი-კანონებს უგულებელყოფენ, სისტემა უფრო მოწყვლადი გახდება.


შემდეგი [[მმართველობა კოდის მეშვეობით]]